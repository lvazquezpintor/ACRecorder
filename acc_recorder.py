""" ACC Race Recorder - Servicio de grabación automática para Assetto Corsa Competizione Graba la pantalla y telemetría sincronizada durante las carreras """ import tkinter as tk from tkinter import ttk, scrolledtext import threading import time import json import subprocess import os from datetime import datetime from pathlib import Path import psutil class ACCRecorderGUI: def __init__(self, root): self.root = root self.root.title("ACC Race Recorder") self.root.geometry("600x400") self.root.resizable(False, False) # Variables de estado self.is_monitoring = False self.is_recording = False self.monitor_thread = None self.recording_thread = None self.telemetry_thread = None self.ffmpeg_process = None self.recording_start_time = None self.output_dir = Path.home() / "ACC_Recordings" self.current_session_dir = None self.telemetry_data = [] # Crear directorio de salida self.output_dir.mkdir(exist_ok=True) # Configurar la interfaz self.setup_ui() def setup_ui(self): # Frame principal main_frame = ttk.Frame(self.root, padding="10") main_frame.grid(row=0, column=0, sticky=(tk.W, tk.E, tk.N, tk.S)) # Título title_label = ttk.Label(main_frame, text="ACC Race Recorder", font=('Arial', 16, 'bold')) title_label.grid(row=0, column=0, columnspan=2, pady=10) # Estado del servicio status_frame = ttk.LabelFrame(main_frame, text="Estado", padding="10") status_frame.grid(row=1, column=0, columnspan=2, sticky=(tk.W, tk.E), pady=10) self.status_label = ttk.Label(status_frame, text="Servicio detenido", font=('Arial', 10)) self.status_label.grid(row=0, column=0, sticky=tk.W) self.indicator = tk.Canvas(status_frame, width=20, height=20) self.indicator.grid(row=0, column=1, padx=10) self.indicator.create_oval(2, 2, 18, 18, fill="red", tags="indicator") # Botones de control button_frame = ttk.Frame(main_frame) button_frame.grid(row=2, column=0, columnspan=2, pady=10) self.start_button = ttk.Button(button_frame, text="Iniciar Servicio", command=self.start_monitoring, width=20) self.start_button.grid(row=0, column=0, padx=5) self.stop_button = ttk.Button(button_frame, text="Detener Servicio", command=self.stop_monitoring, width=20, state=tk.DISABLED) self.stop_button.grid(row=0, column=1, padx=5) # Log de eventos log_frame = ttk.LabelFrame(main_frame, text="Log de Eventos", padding="10") log_frame.grid(row=3, column=0, columnspan=2, sticky=(tk.W, tk.E, tk.N, tk.S), pady=10) self.log_text = scrolledtext.ScrolledText(log_frame, height=12, width=70, state=tk.DISABLED) self.log_text.grid(row=0, column=0, sticky=(tk.W, tk.E, tk.N, tk.S)) # Información de ruta de salida info_frame = ttk.Frame(main_frame) info_frame.grid(row=4, column=0, columnspan=2, pady=5) ttk.Label(info_frame, text=f"Grabaciones en: {self.output_dir}", font=('Arial', 8)).grid(row=0, column=0)